Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (14.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (13.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Importing  Migrations
Connecting to database specified by database.yml
Importing  Migrations
Importing  Migration: _mail_mgr_initial.rb
Importing  Migration: _mail_mgr_create_contact.rb
Importing  Migration: _mail_mgr_test_message.rb
Importing  Migration: _add_deleted_at_to_mailing_lists.rb
Importing  Migration: _contacts_deleted_at.rb
Importing  Migration: _mail_mgr_mailing_list_add_defaults_to_active.rb
Importing  Migration: _mail_mgr_message_add_from_email_address.rb
Connecting to database specified by database.yml
Importing  Migrations
Connecting to database specified by database.yml
  [1m[36m (1.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to MailMgrInitial (20131220180915)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.9ms)[0m  CREATE TABLE "mailing_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" text, "status" varchar(255), "status_changed_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "mailings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "subject" varchar(255), "from_email_address" varchar(255), "mailable_type" varchar(255), "mailable_id" integer, "status" varchar(255), "status_changed_at" datetime, "scheduled_at" datetime, "include_images" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "mailing_lists_mailings" ("mailing_id" integer, "mailing_list_id" integer) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar(255), "test_email_address" varchar(255), "subscription_id" integer, "mailing_id" integer, "guid" varchar(255), "status" varchar(255), "status_changed_at" datetime, "result" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "bounces" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" integer, "mailing_id" integer, "status" varchar(255), "status_changed_at" datetime, "bounce_message" text, "comments" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "mailables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "email_html" text, "email_text" text, "reusable" boolean, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180915')[0m
  [1m[35m (13.2ms)[0m  commit transaction
Migrating to MailMgrCreateContact (20131220180916)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "subscriptions" ADD "contact_id" integer[0m
  [1m[35m (0.2ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to MailMgrInitial (20131220180915)
Migrating to MailMgrCreateContact (20131220180916)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "subscriptions" ADD "contact_id" integer[0m
  [1m[35m (0.2ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (1.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to MailMgrInitial (20131220180915)
Migrating to MailMgrCreateContact (20131220180916)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "subscriptions" ADD "contact_id" integer[0m
Including statuses for Class MailManager::Subscription
Overriding Statuses for Class - MailManager::Subscription, ["active", "inactive", "deleted"], active
Overriding Statuses for Class - MailManager::Subscription, ["active", "unsubscribed", "failed_address", "pending", "duplicate", "admin_unsubscribed"], pending
  [1m[35mMailManager::Subscription Load (0.1ms)[0m  SELECT "subscriptions".* FROM "subscriptions" 
  [1m[36m (1.7ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.6ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180916')[0m
  [1m[35m (4.6ms)[0m  commit transaction
Migrating to MailMgrTestMessage (20131220180917)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "messages" ADD "contact_id" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180917')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to AddDeletedAtToMailingLists (20131220180918)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "mailing_lists" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180918')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to ContactsDeletedAt (20131220180919)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "contacts" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180919')[0m
  [1m[35m (3.8ms)[0m  commit transaction
Migrating to MailMgrMailingListAddDefaultsToActive (20131220180920)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "mailing_lists" ADD "defaults_to_active" boolean
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180920')[0m
  [1m[35m (4.1ms)[0m  commit transaction
Migrating to MailMgrMessageAddFromEmailAddress (20131220180921)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "messages" ADD "from_email_address" varchar(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20131220180921')[0m
  [1m[35m (4.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (1.9ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (14.8ms)[0m  [1mCREATE TABLE "bounces" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" integer, "mailing_id" integer, "status" varchar(255), "status_changed_at" datetime, "bounce_message" text, "comments" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (13.0ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (13.1ms)[0m  [1mCREATE TABLE "mailables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "email_html" text, "email_text" text, "reusable" boolean, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (12.8ms)[0m  CREATE TABLE "mailing_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" text, "status" varchar(255), "status_changed_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime, "defaults_to_active" boolean) 
  [1m[36m (13.0ms)[0m  [1mCREATE TABLE "mailing_lists_mailings" ("mailing_id" integer, "mailing_list_id" integer) [0m
  [1m[35m (13.1ms)[0m  CREATE TABLE "mailings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "subject" varchar(255), "from_email_address" varchar(255), "mailable_type" varchar(255), "mailable_id" integer, "status" varchar(255), "status_changed_at" datetime, "scheduled_at" datetime, "include_images" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (13.4ms)[0m  [1mCREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar(255), "test_email_address" varchar(255), "subscription_id" integer, "mailing_id" integer, "guid" varchar(255), "status" varchar(255), "status_changed_at" datetime, "result" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer, "from_email_address" varchar(255)) [0m
  [1m[35m (12.8ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (11.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (3.6ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (3.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131220180921')
  [1m[36m (4.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131220180915')[0m
  [1m[35m (4.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131220180916')
  [1m[36m (3.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131220180920')[0m
  [1m[35m (3.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131220180917')
  [1m[36m (3.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131220180919')[0m
  [1m[35m (4.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131220180918')
Connecting to database specified by database.yml
  [1m[36m (0.8ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (13.0ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (12.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (1.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Connecting to database specified by database.yml
  [1m[36m (0.8ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to MailMgrInitial (1)
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "mailing_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" text, "status" varchar(255), "status_changed_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "mailings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "subject" varchar(255), "from_email_address" varchar(255), "mailable_type" varchar(255), "mailable_id" integer, "status" varchar(255), "status_changed_at" datetime, "scheduled_at" datetime, "include_images" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "mailing_lists_mailings" ("mailing_id" integer, "mailing_list_id" integer) [0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar(255), "test_email_address" varchar(255), "subscription_id" integer, "mailing_id" integer, "guid" varchar(255), "status" varchar(255), "status_changed_at" datetime, "result" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "bounces" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" integer, "mailing_id" integer, "status" varchar(255), "status_changed_at" datetime, "bounce_message" text, "comments" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "mailables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "email_html" text, "email_text" text, "reusable" boolean, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('1')[0m
  [1m[35m (7.4ms)[0m  commit transaction
Migrating to MailMgrCreateContact (2)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "subscriptions" ADD "contact_id" integer[0m
Including statuses for Class MailManager::Subscription
Overriding Statuses for Class - MailManager::Subscription, ["active", "inactive", "deleted"], active
Overriding Statuses for Class - MailManager::Subscription, ["active", "unsubscribed", "failed_address", "pending", "duplicate", "admin_unsubscribed"], pending
  [1m[35mMailManager::Subscription Load (0.1ms)[0m  SELECT "subscriptions".* FROM "subscriptions" 
  [1m[36m (0.2ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "last_name" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mCREATE TEMPORARY TABLE "altered_subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "subscriptions"
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "altered_subscriptions"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "altered_subscriptions"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('2')[0m
  [1m[35m (4.2ms)[0m  commit transaction
Migrating to MailMgrTestMessage (3)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "messages" ADD "contact_id" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('3')[0m
  [1m[35m (3.4ms)[0m  commit transaction
Migrating to AddDeletedAtToMailingLists (4)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "mailing_lists" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('4')[0m
  [1m[35m (4.2ms)[0m  commit transaction
Migrating to ContactsDeletedAt (5)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "contacts" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('5')[0m
  [1m[35m (4.4ms)[0m  commit transaction
Migrating to MailMgrMailingListAddDefaultsToActive (6)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "mailing_lists" ADD "defaults_to_active" boolean
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('6')[0m
  [1m[35m (3.7ms)[0m  commit transaction
Migrating to MailMgrMessageAddFromEmailAddress (7)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "messages" ADD "from_email_address" varchar(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('7')[0m
  [1m[35m (3.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Connecting to database specified by database.yml
  [1m[36m (0.8ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (3.8ms)[0m  [1mCREATE TABLE "bounces" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "message_id" integer, "mailing_id" integer, "status" varchar(255), "status_changed_at" datetime, "bounce_message" text, "comments" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (3.6ms)[0m  CREATE TABLE "contacts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "contactable_id" integer, "contactable_type" varchar(255), "email_address" varchar(255), "first_name" varchar(255), "last_name" varchar(255), "upated_by" integer, "created_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (4.3ms)[0m  [1mCREATE TABLE "mailables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255) NOT NULL, "email_html" text, "email_text" text, "reusable" boolean, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (12.8ms)[0m  CREATE TABLE "mailing_lists" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "description" text, "status" varchar(255), "status_changed_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime, "defaults_to_active" boolean) 
  [1m[36m (13.2ms)[0m  [1mCREATE TABLE "mailing_lists_mailings" ("mailing_id" integer, "mailing_list_id" integer) [0m
  [1m[35m (13.0ms)[0m  CREATE TABLE "mailings" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "subject" varchar(255), "from_email_address" varchar(255), "mailable_type" varchar(255), "mailable_id" integer, "status" varchar(255), "status_changed_at" datetime, "scheduled_at" datetime, "include_images" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (13.1ms)[0m  [1mCREATE TABLE "messages" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar(255), "test_email_address" varchar(255), "subscription_id" integer, "mailing_id" integer, "guid" varchar(255), "status" varchar(255), "status_changed_at" datetime, "result" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer, "from_email_address" varchar(255)) [0m
  [1m[35m (13.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "mailing_list_id" integer, "status" varchar(255), "status_changed_at" datetime, "updated_by" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "contact_id" integer) 
  [1m[36m (13.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (13.2ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (13.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('7')
  [1m[36m (12.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('4')[0m
  [1m[35m (11.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('1')
  [1m[36m (3.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('2')[0m
  [1m[35m (3.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('5')
  [1m[36m (4.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('6')[0m
  [1m[35m (3.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('3')
